window.onload=function(){if("undefined"==typeof jQuery)alert("ERROR: parallax.js requires jQuery.");else{var a=function(){parallax.width=window.innerWidth,parallax.height=window.innerHeight};a(),$(window).resize(function(){a()})}};var parallaxPage=function(a,b){return{key:a,page:b,right:function(a){return this.transition({left:parallax.width,top:0},{left:-parallax.width,top:0},a)},left:function(a){return this.transition({left:-parallax.width,top:0},{left:parallax.width,top:0},a)},top:function(a){return this.transition({left:0,top:-parallax.height},{left:0,top:parallax.height},a)},bottom:function(a){return this.transition({left:0,top:parallax.height},{left:0,top:-parallax.height},a)},transition:function(a,b,c){if(!parallax.sliding){parallax.sliding=!0;var d=this;parallax.current!==this&&(this.hide(a),"function"==typeof parallax.preload&&parallax.preload(),"function"==typeof this.preload&&this.preload(),this.slide({left:0,top:0},function(){d.makeCurrent(),parallax.sliding=!1,"function"==typeof c&&c()}),"undefined"!=typeof parallax.current&&parallax.current.slide(b,function(){parallax.sliding=!1}),parallax.slideBackground(a))}return this},slide:function(a,b){this.page.css("display","block"),this.page.stop().animate(a,parallax.speed,parallax.easing,function(){"function"==typeof b&&b()})},hide:function(a){return a=a||{left:parallax.width,top:0},this.page.css("display","none"),this.page.css(a),this},show:function(a){return a=a||{left:0,top:0},"undefined"!=typeof parallax.current&&parallax.current.hide(),this.makeCurrent(),this.page.css("display","block"),this.page.css(a),this},makeCurrent:function(){return this===parallax.current?!1:("undefined"!=typeof parallax.current&&(parallax.current.hide(),parallax.last=parallax.current),parallax.updateUrl===!0&&this.updateUrl(),"function"==typeof parallax.onload&&parallax.onload(),"function"==typeof this.onload&&this.onload(),parallax.current=this,!0)},updateUrl:function(){var a=document.URL;a=-1===a.lastIndexOf("#")?a:a.substring(0,a.lastIndexOf("#")),window.location.href=a+"#"+this.key},ackbar:function(){return alert(this.key+" thinks it's a trap!"),this}}},parallax={speed:800,easing:"swing",sliding:!1,unusableNames:["last","current","background","onload","updateUrl","preload"],scaling:.15,add:function(a,b){var c=!0;if("object"==typeof a)try{b=a,a=a.attr("id")}catch(d){c=!1,alert("ERROR:Page object lacks an id")}else"string"!=typeof a&&(c=!1,alert("ERROR:undefined key"));if("object"!=typeof b&&(c=!1,alert("ERROR:undefined page")),c){validKeyName=!0;for(propName in this)propName===a&&(validKeyName=!1);-1!==$.inArray(a,this.unusableNames)&&(validKeyName=!1),validKeyName?(this[a]=parallaxPage(a,b),this[a].hide(),this[a].page.css("position","absolute")):alert("ERROR:'"+a+"' cannot be used as a page identifier")}return this},fromUrl:function(){var a=document.URL.lastIndexOf("#");return-1!==a&&(pageName=document.URL.substring(a+1,document.URL.length),parallax.hasOwnProperty(pageName))?parallax[pageName]:void 0},slideBackground:function(a){"undefined"!=typeof this.background&&"undefined"!=typeof a&&$(this.background).animate({"background-position-x":"+="+-a.left*parallax.scaling+"px","background-position-y":"+="+-a.top*parallax.scaling+"px"},parallax.speed,parallax.easing)}};
/* sm0king 最后修改于：2015-07-09 */
